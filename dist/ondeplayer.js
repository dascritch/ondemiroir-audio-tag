'use strict';var module$ondeplayer_css={},cpu_style$$module$ondeplayer_css='\n\n.{{classname}}, .{{classname}} *, .{{classname}}-cover img {\n\tfont-family : Lato, "Open Sans", "Segoe UI", Frutiger, "Frutiger Linotype", "Dejavu Sans", "Helvetica Neue", Arial, sans-serif;\n\tfont-size : 15px;\n\tborder : none;\n\tpadding : 0;\n\tmargin : 0;\n\ttransition : none;\n}\n.{{classname}} {\n\tdisplay : flex;\n\tbackground : #555;\n\tcolor : #ccc;\n}\n\n.{{classname}}.{{classname}}-act-error {\n\tcolor : #cc0;\n}\n\n.{{classname}} a {\n\tcolor : #aaf;\n\tborder : none !important;\n\ttext-decoration : none;\n}\n.{{classname}} svg {\n  \tfill : #ffffff;\n  \twidth:64px;\n\theight : 64px;\n}\n.{{classname}} a:hover {\n\tcolor : #555;\n\tbackground : #aaf;\n}\n.{{classname}} a:hover svg {\n\tfill : #555;\n}\n.{{classname}}-loading, .{{classname}}-play, .{{classname}}-pause {\n\twidth : 0px;\n}\n\n.{{classname}}-act-loading .{{classname}}-loading,\n.{{classname}}-act-play .{{classname}}-play,\n.{{classname}}-act-pause .{{classname}}-pause,\n.{{classname}}-actions,\n.{{classname}}-back {\n\tflex : 0 0 64px;\n\twidth : 64px;\n\theight : 64px;\n\ttext-align : center;\n\tvertical-align : middle;\n}\n.{{classname}}-actions,\n.{{classname}}-back {\n\tcursor : pointer;\n}\n\n.{{classname}}-cover img {\n\twidth : 64px;\n    max-width: 100%;\n\theight : 64px;\n\tobject-fit: contain;\n}\n\n.{{classname}}-loading svg, .{{classname}}-play svg, .{{classname}}-pause svg, .{{classname}}-actions svg {\n\tvertical-align : middle;\n\tmax-width : 100%;\n\tmax-height : 100%;\n}\n.{{classname}}-titleline {\n\tdisplay : flex;\n\tposition : relative;\n}\n.{{classname}}-about, .{{classname}}-title {\n\tflex : 1 1 100%;\n}\n.{{classname}}-title a {\n    display : block;\n\ttext-overflow : ellipsis;\n\tmax-height: 48px;\n\toverflow: hidden;\n\n}\n.{{classname}}-elapse {\n\tflex : 1 0 120px;\n\ttext-align : right;\n}\n.{{classname}}-time {\n\tbackground : black;\n\twidth : 100%;\n\theight : 10px;\n\tdisplay : block;\n\tborder-radius : 4px;\n\tposition : relative;\n}\n.{{classname}}-loadingline,\n.{{classname}}-elapsedline {\n\tbackground : white;\n\theight : 10px ;\n\tdisplay : block ;\n\tposition : absolute;\n\tleft : 0;\n\tborder-radius : 4px;\n\tpointer-events : none;\n}\n\n.{{classname}}-act-loading .{{classname}}-elapsedline,\n.{{classname}}-loadingline {\n\topacity : 0.3;\n}\n.{{classname}}-pagemain, .{{classname}}-pageshare, .{{classname}}-share {\n\tflex : 1 1 100%;\n\tdisplay : flex;\n\talign-items: center;\n}\n.{{classname}}-share {\n\ttext-align : center;\n}\n\n.{{classname}}-share a {\n\theight : 64px;\n}\n\n.{{classname}}-share a, .{{classname}}-share div {\n\tflex : 1 0;\n\tcolor : white;\n\ttext-decoration : none;\n\toverflow : hidden;\n\ttext-overflow : clip;\n}\n.{{classname}}-share svg {\n\tvertical-align : middle;\n  \t\twidth:32px;\n\t\theight : 32px;\n}\n.{{classname}}-twitter {background : #4DB5F4}\n.{{classname}}-facebook {background : #5974CC}\n.{{classname}}-email {background : #CC0000}\n.{{classname}}-link {background : #77F}\n\n@media screen and (max-width: 640px) {\n\t.{{classname}}-cover , .{{classname}}-play , .{{classname}}-pause, .{{classname}}-actions  {\n\t\tflex : 0 0 32px;\n\t\theight : 32px;\n\t}\n\t.{{classname}} svg {\n  \t\twidth:32px;\n\t\theight : 32px;\n\t}\n  \t.{{classname}}-nosmall {\n\t\tdisplay : none;\n  \t}\n  \t.{{classname}}-elapse {\n  \t\tflex : 1 0 80px;\n  \t}\n\n  \t.{{classname}}-share a {\n\t\theight : 32px;\n\t}\n}\n@media screen and (max-width: 319px) {\n\t.{{classname}}-elapse {\n\t\tdisplay : none;\n\t}\n}\n\n',
$jscompDefaultExport$$module$ondeplayer_css=cpu_style$$module$ondeplayer_css;module$ondeplayer_css.default=$jscompDefaultExport$$module$ondeplayer_css;var module$ondeplayer_html={},cpu_template$$module$ondeplayer_html='\n<div class="{{classname}}-cover {{classname}}-nosmall">\n\t<img src="{{poster}}" alt="{{cover}}" />\n</div>\n<div class="{{classname}}-pagemain">\n\t<div class="{{classname}}-loading">{{svg:loading}}</div>\n\t<a class="{{classname}}-play">{{svg:play}}</a>\n\t<a class="{{classname}}-pause">{{svg:pause}}</a>\n\t<div class="{{classname}}-about">\n\t\t<div class="{{classname}}-titleline">\n\t\t\t<div class="{{classname}}-title"><a href="{{canonical}}" class="{{classname}}-canonical" title="{{title}}">{{title}}</a></div>\n\t\t\t<a class="{{classname}}-elapse">\u2026</a>\n\t\t</div>\n\t\t<div class="{{classname}}-line">\n\t\t\t<div class="{{classname}}-time">\n\t\t\t\t<div class="{{classname}}-loadingline"></div>\n\t\t\t\t<div class="{{classname}}-elapsedline"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<a class="{{classname}}-actions">{{svg:share}}</a>\n</div>\n<div class="{{classname}}-pageshare">\n\t<div class="{{classname}}-share">\n\t\t<a href="#" target="social" class="{{classname}}-twitter {{classname}}-nosmall" title="{{twitter}}">{{svg:twitter}}<span>{{twitter}}</span></a>\n\t\t<a href="#" target="social" class="{{classname}}-facebook {{classname}}-nosmall" title="{{facebook}}">{{svg:facebook}}<span>{{facebook}}</span></a>\n\t\t<a href="#" target="social" class="{{classname}}-email" title="{{email}}">{{svg:email}}<span>{{e-mail}}</span></a>\n\t\t<a href="{{playlister}}" target="onde_miroir_player" class="{{classname}}-playlist" title="{{playlist}}">{{svg:play}}<span>{{playlist}}</span></a>\n\t\t<a href="#" target="social" class="{{classname}}-link" title="{{download}}">{{svg:download}}<span>{{download}}</span></a>\n\t\t<a class="{{classname}}-back" title="{{back}}">{{back}}</a>\n\t</div>\n</div>\n',
$jscompDefaultExport$$module$ondeplayer_html=cpu_template$$module$ondeplayer_html;module$ondeplayer_html.default=$jscompDefaultExport$$module$ondeplayer_html;var module$ondeplayer={};
window.OndeMiroirAudio=function(){""!==document.domain&&(document.domain=document.domain.replace(/^(.*\.)?(\w+\.\w+)$/,"$2"));if(void 0!==document.querySelector&&"oncanplay"in window&&[].forEach){var h={d:86400,h:3600,m:60,s:1},b={dontHideAudioTag:!1,selector_media:"audio[controls]",selector_fallback:"audio[data-ondeplayer]",selector_container:"div[data-ondeplayer]",dynamicallyAllocatedIdPrefix:"OndeMiroirAudio-tag-",menuId:"OndeMiroirAudio-menu",styleId:"OndeMiroirAudio-style",container:{tagname:"div",
idPrefix:"OndeMiroirAudio-Player-",classname:"OndeMiroirAudio-Player"},poster_fallback:"//dascritch.net/themes/DSN13/img/entete1.svg",playlister:!1,playlist_window:!1,is_in_playlist:!1,rebuild_eventname:"ondemiroir.rebuild",keymove:5,__:{"(no title)":"(sans titre)",cover:"pochette",more:"Partager",twitter:"Partager sur Twitter",facebook:"Partager sur Facebook","e-mail":"Partager par e-mail",playlist:"\u00c9couter plus tard",download:"T\u00e9l\u00e9charger",back:"Annuler"},_traces:{play:'<path d="M 6,6 6,26 26,16 z" />',
stop:'<path d="M 6,6 6,26 26,26 26,6 z" />',pause:'<path d="M 6,6 12.667,6 12.667,26 6,26 z" /><path d="M 19.333,6 26,6 26,26 19.333,26 z" />',loading:'<circle cx="6" cy="22" r="4" fill="#777777" /><circle cx="16" cy="22" r="4" fill="#777777" /><circle cx="26" cy="22" r="4" fill="#777777" />',share:'<circle cx="12" cy="10" r="4" /><circle cx="12" cy="22" r="4" /><circle cx="23" cy="16" r="4" /><polygon points="12,8 24,14 24,18 12,12"/><polygon points="12,20 24,14 24,18 12,24"/>',facebook:'<path d="m 21.117,16.002 -3.728,0 0,10.027 -4.297,0 0,-10.027 -2.070,0 0,-3.280 2.070,0 0,-2.130 c 0,-2.894 1.248,-4.616 4.652,-4.616 l 3.922,0 0,3.549 -3.203,0 c -0.950,-0.001 -1.068,0.495 -1.068,1.421 l -0.005,1.775 4.297,0 -0.568,3.280 0,2.34e-4 z" />',
twitter:'<path d="M 25.941,9.885 C 25.221,10.205 24.448,10.422 23.637,10.520 24.465,10.020 25.101,9.230 25.401,8.288 24.626,8.750 23.768,9.086 22.854,9.267 22.122,8.483 21.080,7.993 19.926,7.993 c -2.215,0 -4.011,1.806 -4.011,4.034 0,0.316 0.035,0.623 0.103,0.919 -3.333,-0.168 -6.288,-1.774 -8.267,-4.215 -0.345,0.596 -0.542,1.289 -0.542,2.028 0,1.399 0.708,2.634 1.784,3.358 -0.657,-0.020 -1.276,-0.202 -1.816,-0.504 -3.98e-4,0.016 -3.98e-4,0.033 -3.98e-4,0.050 0,1.954 1.382,3.585 3.217,3.955 -0.336,0.092 -0.690,0.141 -1.056,0.141 -0.258,0 -0.509,-0.025 -0.754,-0.072 0.510,1.602 1.991,2.769 3.746,2.801 -1.372,1.082 -3.102,1.726 -4.981,1.726 -0.323,0 -0.642,-0.019 -0.956,-0.056 1.775,1.144 3.883,1.812 6.148,1.812 7.377,0 11.411,-6.147 11.411,-11.478 0,-0.174 -0.004,-0.348 -0.011,-0.522 0.783,-0.569 1.463,-1.279 2.001,-2.088 z" />',
email:'<path d="m 8.030,8.998 15.920,0 c 0.284,0 0.559,0.053 0.812,0.155 l -8.773,9.025 -8.773,-9.026 c 0.253,-0.101 0.528,-0.155 0.812,-0.155 z m -1.990,12.284 0,-10.529 c 0,-0.036 0.002,-0.073 0.004,-0.109 l 5.835,6.003 -5.771,5.089 c -0.045,-0.146 -0.068,-0.298 -0.069,-0.453 z m 17.910,1.754 -15.920,0 c -0.175,0 -0.348,-0.020 -0.514,-0.060 l 5.662,-4.993 2.811,2.892 2.811,-2.892 5.662,4.993 c -0.165,0.039 -0.338,0.060 -0.514,0.060 z m 1.990,-1.754 c 0,0.155 -0.023,0.307 -0.068,0.453 l -5.771,-5.089 5.835,-6.003 c 0.002,0.036 0.004,0.073 0.004,0.109 z" />',
download:'<path d="M 6,6 26,6 16,26 z" /><rect x="6" y="22" width="20" height="4" />'},count_element:0,convertTimeInSeconds:function(a){return/^\d+$/.test(a)?Number(a):-1===a.indexOf(":")?this.convertSubunitTimeInSeconds(a):this.convertColonTimeInSeconds(a)},convertSubunitTimeInSeconds:function(a){var b=0,d;for(d in h)h.hasOwnProperty(d)&&-1!==a.indexOf(d)&&(a=a.split(d),b+=Number(a[0].replace(/\D*/g,""))*h[d],a=a[1]);return b},convertColonTimeInSeconds:function(a){var b=0;a=a.split(":");for(var d=
[1,60,3600,86400],e=0;e<a.length;e++)b+=Number(a[e])*d[a.length-1-e];return b},convertSecondsInTime:function(a){var b="",d=!1,e;for(e in h)if(h.hasOwnProperty(e)){var g=h[e];if(a>=g||d){d=!0;var f=Math.floor(a/g);b+=f+e;a-=f*g}}""===b&&(b="0s");return b},seekElementAt:function(a,c){if(void 0!==a.fastSeek)a.fastSeek(c);else try{a.currentTime=c}catch(d){a.src=a.currentSrc.split("#")[0]+"#t="+c}a._ondemiroir.forEach(function(d){d=document.getElementById(d);b.update_line(a,d,"loading",c);b.update_act_container("loading",
d)})},jumpIdAt:function(a,c,d){function e(a){var b=a.target;b.play();void 0!==a.preventDefault&&b.removeEventListener("canplay",e,!0);"function"===typeof d&&d()}function g(a){void 0!==a.preventDefault&&f.removeEventListener("loadedmetadata",g,!0);a=b.convertTimeInSeconds(c);b.seekElementAt(f,a);f.readyState>=f.HAVE_FUTURE_DATA?e({target:f}):f.addEventListener("canplay",e,!0);b.update({target:f})}var f=""!==a?document.getElementById(a):document.querySelector(this.selector_fallback);if(void 0===f||
null===f||void 0===f.currentTime)return!1;f.readyState<f.HAVE_CURRENT_DATA?(f.addEventListener("loadedmetadata",g,!0),f.load()):g({});b.update({target:f})},hashOrder:function(a,c){var d=!1;"string"!==typeof a&&(d="at_start"in a,a=document.location.hash.substr(1));var e="",g="";a=a.split("&");var f=!1,h;for(h in a){var k=a[h];if(-1===k.indexOf("="))e=k;else{k=k.split("=");var l=k[1];switch(k[0]){case "t":g=l;break;case "autoplay":f=!0;break;case "auto_play":f=!0}}}""===g||d&&!f?"function"===typeof c&&
c():b.jumpIdAt(e,g,c)},update_act_container:function(a,c){c.classList.remove(b.container.classname+"-act-loading",b.container.classname+"-act-pause",b.container.classname+"-act-play");c.classList.add(b.container.classname+"-act-"+a)},update_playbutton:function(a,c,d){c.readyState<c.HAVE_CURRENT_DATA?b.update_act_container("loading",d):c.paused?b.update_act_container("pause",d):b.update_act_container("play",d)},update_line:function(a,c,d,e){c.querySelector("."+b.container.classname+"-"+d+"line").style.width=
0===a.duration?0:String(100*e/a.duration)+"%"},update_time:function(a,c,d){var e=b.absolutize_url(c.dataset.canonical)+"#";e+=c.id?c.id+"&":"";a=b.convertSecondsInTime(c.currentTime);e+="t="+a;var g=d.querySelector("."+b.container.classname+"-elapse");g.href=e;e="\u2026";isNaN(Math.round(c.duration))||(e=b.convertSecondsInTime(Math.round(c.duration)));g.innerHTML=a+'<span class="'+b.container.classname+'-nosmall">\u00a0/\u00a0'+e+"</span>";b.update_line(c,d,"elapsed",c.currentTime)},update_id_container_infos:function(a){a=
document.getElementById(a);var c=this.target;console.log(this,c.error,c.readyState);if("error"===c.error)switch(b.update_act_container("error",a),c.error.code){case c.error.MEDIA_ERR_ABORTED:alert("You aborted the video playback.");break;case c.error.MEDIA_ERR_NETWORK:alert("A network error caused the audio download to fail.");break;case c.error.MEDIA_ERR_DECODE:alert("The audio playback was aborted due to a corruption problem or because the video used features your browser did not support.");break;
case c.error.MEDIA_ERR_SRC_NOT_SUPPORTED:alert("The video audio not be loaded, either because the server or network failed or because the format is not supported.");break;default:alert("An unknown error occurred.")}else b.update_playbutton(this,c,a),b.update_time(this,c,a)},update:function(a){var c=a.target;c._ondemiroir.forEach(b.update_id_container_infos,a);c.paused||localStorage.setItem(c.currentSrc,String(c.currentTime))},find_container:function(a){return a.closest?a.closest("."+b.container.classname):
a.className===b.container.classname?a:b.find_container(a.parentNode)},do_throbble:function(a){var c=b.find_container(a.target);c=document.getElementById(c.dataset.ondeplayer);var d=a.target.getClientRects()[0].left;b.seekElementAt(c,(a.clientX-d)/a.target.clientWidth*c.duration)},do_pause:function(a){a=b.find_container(a.target);a=document.getElementById(a.dataset.ondeplayer);a.pause();localStorage.removeItem(a.currentSrc)},do_play:function(a){a=b.find_container(a.target);document.getElementById(a.dataset.ondeplayer).play()},
do_onkey:function(a){var c=b.find_container(a.target);c=document.getElementById(c.dataset.ondeplayer);switch(a.keyCode){case 27:b.seekElementAt(c,0);c.pause();break;case 32:c.paused?c.play():c.pause();break;case 35:b.seekElementAt(c,c.duration);break;case 36:b.seekElementAt(c,0);break;case 37:b.seekElementAt(c,c.currentTime-b.keymove);break;case 39:b.seekElementAt(c,c.currentTime+b.keymove)}},absolutize_url:function(a){var b=document.createElement("a");b.href=a;return b.href},update_links:function(a,
c){function d(a,d){c.querySelector("."+b.container.classname+"-"+a).href=d}var e=a.dataset.canonical;e=(void 0===e?"":e)+"#"+a.id+(0===a.currentTime?"":b.separator+b.convertSecondsInTime(a.currentTime));e=encodeURI(b.absolutize_url(e));var g=encodeURI(a.title);d("twitter","https://twitter.com/share?text="+g+"&url="+e+"&via=dascritch");d("facebook","https://www.facebook.com/sharer.php?t="+g+"&u="+e);d("email","mailto:?subject="+g+"&body="+e);d("link",a.currentSrc);d("playlist",b.playlister)},show_actions:function(a){a=
b.find_container(a.target);a.querySelector("."+b.container.classname+"-pagemain").style.display="none";a.querySelector("."+b.container.classname+"-pageshare").style.display="flex";b.update_links(document.getElementById(a.dataset.ondeplayer),a.querySelector("."+b.container.classname+"-share"))},show_main:function(a){a=b.find_container(a.target);a.querySelector("."+b.container.classname+"-pagemain").style.display="flex";a.querySelector("."+b.container.classname+"-pageshare").style.display="none"},push_in_playlist:function(a){b.playlist_window.push_in_playlist?
b.playlist_window.push_in_playlist(a):window.setTimeout(b.push_in_playlist,500,a)},add_playlist:function(a){b.playlist_window=window.open(b.playlister+"#","onde_miroir_player");var c=b.find_container(a.target);c=document.getElementById(c.dataset.ondeplayer);b.push_in_playlist({src:b.absolutize_url(c.currentSrc),title:c.title,cover:b.absolutize_url(b.element_attribute(c,"poster",b.poster_fallback)),canonical:b.absolutize_url(c.dataset.canonical)});c.pause();a.preventDefault()},populate_template:function(a,
b){for(var c in b)a=a.replace(RegExp("{{"+c+"}}","g"),b[c]);return a},element_attribute:function(a,b,d){return void 0===a.attributes[b]?d:a.attributes[b].value},get_params_for_template:function(a){void 0===a.dataset.canonical&&(a.dataset.canonical=document.location.href);a={title:""===a.title?"<em>"+b.__["(no title)"]+"</em>":a.title,canonical:b.absolutize_url(a.dataset.canonical),poster:b.absolutize_url(b.element_attribute(a,"poster",b.poster_fallback)),classname:b.container.classname,playlister:b.playlister};
for(var c in b.__)a[c]=b.__[c];for(c in b._traces)a["svg:"+c]='<svg viewBox="0 0 32 32">'+b._traces[c]+"</svg>";return a},rebuild:function(a){var c=a.target;c._ondemiroir.forEach(function(a){a=document.getElementById(a);void 0===a.dataset.ondeplayer?(a.remove(),b.build_for_audiotag(c)):(a.innerHTML="",b.build_for_placeholder(a))})},add_id_to_container:function(a){a.id=""!==a.id?a.id:b.container.idPrefix+String(b.count_element++)},add_id_to_audiotag:function(a){""===a.id&&(a.id=b.dynamicallyAllocatedIdPrefix+
String(b.count_element++))},add_related_controller:function(a,c){b.add_id_to_container(c);-1<a._ondemiroir.indexOf(c.id)||a._ondemiroir.push(c.id)},build_controller:function(a,c){a.dataset.ondeplayer=c.id;a.className=b.container.classname;a.innerHTML=b.populate_template(module$ondeplayer_html.default,b.get_params_for_template(c));a.tabIndex=0;b.add_related_controller(c,a);var d={pause:b.do_play,play:b.do_pause,time:b.do_throbble,actions:b.show_actions,back:b.show_main,cover:b.show_main,playlist:b.add_playlist},
e;for(e in d)a.querySelector("."+b.container.classname+"-"+e).addEventListener("click",d[e]);a.addEventListener("keydown",b.do_onkey);b.show_main({target:a.querySelector("a")});b.update({target:c});return a},find_placeholders:function(a){var c=document.getElementById(a.dataset.ondeplayer);null!==c&&(b.add_related_controller(c,a),b.build_controller(a,c))},build_for_audiotag:function(a){void 0===a._ondemiroir&&(a._ondemiroir=[]);a.load();b.add_id_to_audiotag(a);var c=document.createElement(b.container.tagname);
a.parentNode.insertBefore(c,a);c=b.build_controller(c,a);c=Number(localStorage.getItem(a.currentSrc));0<c&&(b.seekElementAt(a,c),a.play());"ready load loadeddata canplay suspend abort emptied error stalled play playing pause suspend ended durationchange loadedmetadata progress timeupdate waiting".split(" ").forEach(function(c){a.addEventListener(c,b.update)});a.addEventListener("ondemiroir.rebuild",b.rebuild);b.update({target:a});!1===b.dontHideAudioTag&&(a.hidden=!0,a.removeAttribute("controls"),
a.setAttribute("data-ondeplayer",""))},prevent_link_on_same_page:function(a){b.absolutize_url(document.location.href)===b.absolutize_url(a.target.href)&&a.preventDefault()},element_prevent_link_on_same_page:function(a){a.addEventListener("click",b.prevent_link_on_same_page)},insertStyle:function(){var a=document.createElement("style");a.id=b.styleId;b.is_in_playlist&&(module$ondeplayer_css.default+=" .{{classname}}-playlist { display : none; }");a.innerHTML=b.populate_template(module$ondeplayer_css.default,
b.get_params_for_template(a));document.getElementsByTagName("head")[0].appendChild(a)},querySelector_apply:function(a,b){[].forEach.call(document.querySelectorAll(a),b)},launch:function(){null===document.getElementById(b.styleId)&&(b.playlister||b.querySelector_apply("script[src]",function(a){var c=a.src.indexOf("ondeplayer.js");-1<c&&(b.playlister=b.absolutize_url(a.src.substr(0,c)+"index.html"),b.playlister===document.location.href.replace(/#.*$/,"")&&(b.is_in_playlist=!0))}),new CustomEvent(b.rebuild),
b.querySelector_apply(b.selector_media,b.build_for_audiotag),b.querySelector_apply(b.selector_container,b.find_placeholders),b.insertStyle(),b.querySelector_apply("."+b.container.classname+"-canonical",b.element_prevent_link_on_same_page),b.hashOrder({at_start:!0}),window.addEventListener("hashchange",b.hashOrder,!1))}};null!==document.body?b.launch():document.addEventListener("DOMContentLoaded",b.launch,!1);return b}}();
